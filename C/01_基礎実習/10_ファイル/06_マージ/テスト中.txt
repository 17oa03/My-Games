/*
【プログラム概要】
商品マスタ1と商品マスタ2を入力し、
マージ処理により商品マスタ3を出力する。
また、処理レコード数を標準出力へ出力する。
*/

/*【プログラム】*/
#include <stdio.h>
#include <stdlib.h>  /* exit関数, EXIT_FAILURE, EXIT_SUCCESS */

/* 商品マスタの件数 */
#define ITEMS_1 4 /* 商品マスタ1の件数 */
#define ITEMS_2 3 /* 商品マスタ2の件数 */

#ifndef TRUE   /* TRUE が定義されていなかったら */
#define TRUE 1 /* TRUE を 1 と定義する */
#endif         /* 疑似命令の終了 */

#ifndef FALSE   /* FALSE が定義されていなかったら */
#define FALSE 0 /* FALSE を 0 と定義する */
#endif          /* 疑似命令の終了 */

/* 構造体の宣言 */
typedef struct prodact {
	int  code;       /* 商品コード */
	char name[11];   /* 商品名 */
	int  unit_price; /* 単価 */
}Prodact; /* 構造体の定義 */

int main(void)
{
	/* Prodact型配列の定義 */
	Prodact data_1[ITEMS_1];
	Prodact data_2[ITEMS_2];

	/* ストリームポインタ宣言 */
	FILE *fp_1, *fp_2, *fp_3;

	/* ファイル名 */
	char *fname_1 = "syohin1.mst";
	char *fname_2 = "syohin2.mst";

	/* カウンタ変数 */
	int i = 0, j = 0;

	/* 読込みモードでファイルオープン */
	if ((fp_1 = fopen("syohin1.mst", "r")) == NULL) {

		printf("商品マスタ(%s)が、みつかりません。\n", fname_1);

		/* 入力待ち */
		getchar();

		/* プログラム異常終了(EXIT_FAILURE = 1) */
		exit(EXIT_FAILURE);
	}

	/* 読込みモードでファイルオープン */
	if ((fp_2 = fopen("uriage.dat", "r")) == NULL) {

		printf("商品マスタ(%s)が、みつかりません。\n", fname_2);

		/* 入力待ち */
		getchar();

		/* プログラム異常終了(EXIT_FAILURE = 1) */
		exit(EXIT_FAILURE);
	}

	/* 商品マスタ1の読込み */
	while ((fscanf(fp_1, "%d %d %s %d %d",
				&data_1[i].code,
				 data_1[i].name,
				&data_1[i].unit_price))
		!= EOF) {i++; }

	printf("入力ファイル(商品マスタ1) : %3d レコード\n", i);

	/* 商品マスタ2の読込み */
	while ((fscanf(fp_2, "%d %d %s %d %d",
				&data_2[i].code,
				 data_2[i].name,
				&data_2[i].unit_price))
		!= EOF) {j++; }

	printf("入力ファイル(商品マスタ2) : %3d レコード\n", j);

	fp_3 = fopen("syohin3.mst", "a");

	while (i == ITEMS_1 || j == ITEMS_2)
	{
		if (data_1[i].code < data_2[j].code) {

			fprintf(fp_3, "%d %s %d\n",
				data_1[i].code,
				data_1[i].name,
				data_1[i].unit_price);

			i++;
		}
		else
		{

			fprintf(fp_3, "%d %s %d\n",
				data_2[j].code,
				data_2[j].name,
				data_2[j].unit_price);

			j++;
		}
	}

	if (j == ITEMS_2){

		while (i < ITEMS_1) {

			fprintf(fp_3, "%d %s %d\n",
				data_1[i].code,
				data_1[i].name,
				data_1[i].unit_price);

			j++;
		}
	}

	if (i == ITEMS_1) {

		while (j < ITEMS_2) {

			fprintf(fp_3, "%d %s %d\n",
				data_2[i].code,
				data_2[i].name,
				data_2[i].unit_price);
		}


	}
	printf(商品マスタ3)

		クローズ

		return